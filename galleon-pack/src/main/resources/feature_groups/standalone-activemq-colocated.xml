<?xml version="1.0" encoding="UTF-8"?>
<feature-group-spec name="standalone-activemq-colocated" xmlns="urn:jboss:galleon:feature-group:1.0">

    <feature spec="interface">
        <param name="interface" value="private"/>
        <param name="inet-address" value="${jboss.bind.address.private:127.0.0.1}"/>
    </feature>
    <feature spec="socket-binding-group">
        <param name="default-interface" value="public" />
        <param name="socket-binding-group" value="standard-sockets" />
        <feature-group name="jgroups-sockets"/>
    </feature>
    <feature-group name="standalone-full"/>
    <feature-group name="messaging-activemq">
        <feature spec="subsystem.messaging-activemq">
            <feature spec="subsystem.messaging-activemq.server">
                <param name="server" value="default"/>
                <param name="persistence-enabled" value="true"/>
                <param name="cluster-password" value="${jboss.messaging.cluster.password:CHANGE ME!!}"/>
                <param name="journal-file-size" value="102400"/>
                <param name="journal-min-files" value="2"/>
                <param name="journal-type" value="ASYNCIO"/>

                <feature spec="subsystem.messaging-activemq.server.in-vm-connector">
                    <param name="in-vm-connector" value="in-vm"/>
                    <unset param="params"/>
                </feature>
                <feature spec="subsystem.messaging-activemq.server.in-vm-acceptor">
                    <param name="in-vm-acceptor" value="in-vm"/>
                    <unset param="params"/>
                </feature>

                <feature spec="subsystem.messaging-activemq.server.broadcast-group">
                    <param name="broadcast-group" value="bg-group1"/>
                    <param name="jgroups-cluster" value="activemq-cluster"/>
                    <param name="connectors" value="[http-connector]"/>
                </feature>
                <feature spec="subsystem.messaging-activemq.server.discovery-group">
                    <param name="discovery-group" value="dg-group1"/>
                    <param name="jgroups-cluster" value="activemq-cluster"/>
                </feature>
                <feature spec="subsystem.messaging-activemq.server.cluster-connection">
                    <param name="cluster-connection" value="my-cluster"/>
                    <param name="cluster-connection-address" value="jms"/>
                    <param name="connector-name" value="http-connector"/>
                    <param name="discovery-group" value="dg-group1"/>
                </feature>

                <feature spec="subsystem.messaging-activemq.server.jms-queue">
                    <param name="jms-queue" value="testQueue"/>
                    <param name="entries" value="[queue/test,java:jboss/exported/jms/queue/test]"/>
                </feature>
                <feature spec="subsystem.messaging-activemq.server.jms-topic">
                    <param name="jms-topic" value="testTopic"/>
                    <param name="entries" value="[topic/test,java:jboss/exported/jms/topic/test]"/>
                </feature>

            </feature>
        </feature>
        <exclude spec="subsystem.messaging-activemq.server.http-connector"/>
        <exclude spec="subsystem.messaging-activemq.server.http-acceptor"/>
    </feature-group>
    <feature-group name="jgroups"/>

</feature-group-spec>
